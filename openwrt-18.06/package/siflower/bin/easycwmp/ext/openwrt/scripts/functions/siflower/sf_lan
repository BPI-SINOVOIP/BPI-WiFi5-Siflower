#!/bin/sh

prefix_list="$prefix_list $DMROOT.Lan."
entry_execute_method_list="$entry_execute_method_list entry_execute_method_root_Lan"
# entry_execute_method_list_forcedinform="$entry_execute_method_list_forcedinform  entry_execute_method_root_Lan"

entry_execute_method_root_Lan() {
	case "$1" in ""|"$DMROOT."|"$DMROOT.Lan."*)
		common_execute_method_obj "$DMROOT.Lan." "0"
		common_execute_method_obj "$DMROOT.Lan.IPInfo." "0"
		common_execute_method_param "$DMROOT.Lan.IPInfo.proto" "1" "$UCI_GET network.lan.proto" "lan_ip_info_set_proto" "" "1"
		common_execute_method_param "$DMROOT.Lan.IPInfo.ip" "1" "$UCI_GET network.lan.ipaddr" "lan_ip_info_set_ip" "" "1"
		common_execute_method_param "$DMROOT.Lan.IPInfo.netmask" "0" "$UCI_GET network.lan.netmask" "" "" "1"
		common_execute_method_obj "$DMROOT.Lan.DHCPInfo." "0"
		common_execute_method_param "$DMROOT.Lan.DHCPInfo.disable" "1" "lan_dhcp_info_get_disable" "lan_dhcp_info_set_disable" "xsd:boolean" "1"
		common_execute_method_param "$DMROOT.Lan.DHCPInfo.start" "1" "$UCI_GET dhcp.lan.start" "lan_dhcp_info_set_start" "xsd:unsignedInt" "1"
		common_execute_method_param "$DMROOT.Lan.DHCPInfo.limit" "1" "$UCI_GET dhcp.lan.limit" "lan_dhcp_info_set_limit" "xsd:unsignedInt" "1"
		return 0;
		;;
	esac
	return $E_INVALID_PARAMETER_NAME;
}

lan_ip_info_set_proto() {
    local ret
	$UCI_SET network.lan.proto=$1
	ret=$?
	return $ret
}

lan_ip_info_set_ip() {
    local ret
	$UCI_SET network.lan.ipaddr=$1
	ret=$?
	return $ret
}


lan_dhcp_info_get_disable() {
	local tmp=`uci get dhcp.lan.ignore`
	if [ ! -z "$tmp" ]; then
		echo "$tmp"
	else
		echo "0"
    fi
}

lan_dhcp_info_set_disable() {
	local ret
	common_set_bool "dhcp.lan.ignore" "$1" "1" "0"
	ret=$?
	return $ret
}

lan_dhcp_info_set_start() {
	local ret
	$UCI_SET dhcp.lan.start=$1
	ret=$?
	return $ret
}

lan_dhcp_info_set_limit() {
	local ret
	$UCI_SET dhcp.lan.limit=$1
	ret=$?
	return $ret
}